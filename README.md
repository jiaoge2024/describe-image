# Describe Image Skill

> 分析图片并生成结构化的中文描述 JSON，键为英文，值为中文

## 简介

`describe-image` 是一个强大的图片分析技能，能够自动识别和分析各种类型的图片（人像、静物、风景、地图、UI截图等），生成详细的结构化 JSON 描述。

### 核心特性

- **多类型支持**：人像照片、手绘地图、插画、产品图、风景、UI截图等
- **高精度分析**：系统化扫描流程，确保描述准确具体
- **静默执行**：零中断、零询问，一次性输出完整结果
- **结构化输出**：标准 JSON 格式，便于程序化处理
- **自动保存**：原图和 JSON 文件自动分类保存

## 使用方法

### 触发命令

```
/describe-image
```

### 输入方式

1. **拖拽图片**：直接将图片拖入对话框
2. **粘贴图片**：从剪贴板粘贴
3. **提供路径**：输入图片文件路径
4. **提供 URL**：输入图片链接

### 使用示例

```
用户：/describe-image [上传图片]

AI：[直接输出纯 JSON 格式的图片分析结果]
```

## 支持的图片类型

| 类型 | 识别特征 | 分析重点 |
|------|---------|---------|
| **人像照片** | 人物为主体，真实摄影 | 人物特征、服装、姿态、背景、鞋子细节 |
| **手绘地图** | 手绘风格、标注文字、图例 | 地理元素、标注内容、风格特征、图例 |
| **插画/绘画** | 艺术风格、非摄影 | 艺术风格、构图、色彩、主题元素 |
| **产品图** | 商品为主体、白底/纯色背景 | 产品细节、材质、颜色、品牌标识 |
| **风景照片** | 自然/城市景观 | 景观元素、光线、天气、地理特征 |
| **UI/截图** | 软件界面、网页 | 布局结构、功能元素、文字内容 |
| **图表/信息图** | 数据可视化 | 数据内容、图表类型、信息结构 |

## 输出格式

### JSON 结构模板

```json
{
  "source_image_analysis": {
    "image_specifications": {
      "aspect_ratio": "图片宽高比（如2:3、3:4、16:9等）",
      "orientation": "图片方向（竖向/横向/方形）"
    },
    "subject": {
      "demographics": "人物特征描述（性别、年龄、肤色等）",
      "hair": {
        "color": "发色描述",
        "style": "发型描述"
      },
      "facial_features": {
        "eyewear": "眼镜描述或无眼镜",
        "expression": "表情描述",
        "makeup": "妆容描述"
      }
    },
    "apparel": {
      "clothing": {
        "type": "服装类型",
        "color": "颜色",
        "pattern": "图案"
      },
      "footwear": {
        "type": "鞋类型",
        "color": "鞋颜色",
        "details": "鞋细节描述"
      }
    },
    "pose_and_action": {
      "type": "姿态类型",
      "hands": {
        "left_hand": "左手描述",
        "right_hand": "右手描述"
      },
      "body_language": "肢体语言描述"
    },
    "environment": {
      "setting": "场景描述",
      "background_elements": ["元素1", "元素2"]
    },
    "camera_and_technical": {
      "lighting_setup": {
        "type": "光照类型",
        "effect": "光影效果"
      },
      "visual_fidelity": {
        "resolution": "分辨率描述",
        "details": "细节描述"
      },
      "color_grading": "调色描述",
      "composition": "构图描述"
    }
  }
}
```

### 输出示例

**输入：** 人像照片

**输出：**
```json
{
  "source_image_analysis": {
    "image_specifications": {
      "aspect_ratio": "2:3",
      "orientation": "竖向"
    },
    "subject": {
      "demographics": "亚洲女性，约20-25岁，肤色白皙",
      "hair": {
        "color": "深棕色",
        "style": "长卷发，披肩造型"
      },
      "facial_features": {
        "eyewear": "无",
        "expression": "自然微笑，眼神柔和",
        "makeup": "淡妆，自然眉形"
      }
    },
    "apparel": {
      "clothing": {
        "type": "白色毛衣",
        "color": "米白色",
        "pattern": "针织纹理"
      },
      "footwear": {
        "type": "小白鞋",
        "color": "白色",
        "details": "白色板鞋，鞋身侧面有蓝色条纹装饰，白色鞋底，白色系带"
      }
    },
    "environment": {
      "setting": "室内咖啡馆场景",
      "background_elements": ["米色墙面", "木质家具", "绿植", "窗户"]
    },
    "camera_and_technical": {
      "lighting_setup": {
        "type": "自然光",
        "effect": "柔和漫射"
      },
      "visual_fidelity": {
        "resolution": "高分辨率",
        "details": "高纹理保真度"
      },
      "composition": "人像构图"
    }
  }
}
```

## 文件夹结构

```
skills/describe-image/
├── SKILL.md           # Skill 配置文件
├── README.md          # 本说明文档
├── images/            # 存放原图（自动创建）
└── output/            # 存放输出的 JSON 文件（自动创建）
```

### 文件命名规范

| 文件类型 | 命名格式 | 示例 |
|---------|---------|------|
| 原图 | `img_YYYYMMDD_HHMMSS.{ext}` | `img_20250115_143022.jpg` |
| JSON | `description_YYYYMMDD_HHMMSS.json` | `description_20250115_143022.json` |

## 分析精度标准

### 细节颗粒度要求

| 禁止（模糊） | 正确（具体） |
|-------------|-------------|
| 白色运动鞋 | 白色板鞋，鞋身侧面有蓝色条纹装饰，白色鞋底，白色系带 |
| 蓝色裤子 | 蓝色牛仔短裙，A字版型，裙摆长度至大腿中部 |
| 背景虚化 | 米色墙面背景，木纹地板，右侧有绿色盆栽 |
| 装饰性道具 | 墙面挂有3幅中国风山水画，木质桌面放置书籍和台灯 |

### 必须检查的细节

1. **图片比例**：准确识别宽高比（2:3、3:4、16:9等）
2. **鞋子/脚部**：类型、颜色、款式、品牌标识、鞋底颜色、鞋带样式
3. **下装类型**：准确区分裤子和裙子
4. **背景环境**：墙面、地面、家具、装饰、窗帘、挂画等
5. **配饰道具**：任何可见的饰品、包包、道具

### 禁止词汇

以下词汇**严禁使用**：

- 可能
- 或许
- 应该是
- 大概是
- 看起来像

**必须使用的确认词汇**：
- 是
- 可见
- 清晰显示
- 观察到

## 不同类型图片的分析重点

### 人像照片

- 人物特征：性别、年龄、发型、表情、妆容
- 服装细节：类型、颜色、图案、材质
- **鞋子详情**：类型、颜色、款式、品牌特征
- 姿态动作：站/坐/躺、手部位置、肢体语言
- 背景环境：墙面、地面、家具、装饰、光影

### 手绘地图/旅游图

- 标题/主题文字
- 地理元素：地标、水系、道路、桥梁
- 标注内容：所有可见文字、图例、方向指示
- 装饰元素：插画风格装饰物、美食/文化元素
- 艺术风格：绘画技法、色彩基调、做旧效果

### UI/界面截图

- 界面类型：平台（iOS/Android/Web）、App类型
- 布局结构：顶部导航、主体内容、底部栏
- **文字内容**：标题、正文、按钮、标签、数据
- 交互元素：按钮、输入框、开关、列表
- 视觉元素：图标、插图、配色方案
- 品牌标识：App名称、logo、水印、署名

### 插画/绘画

- 艺术风格：水彩、线描、卡通、数字绘画等
- 构图特点：主体布局、视觉焦点
- 色彩搭配：主色调、配色方案
- 主题元素：主要角色、场景、道具

## 质量检查清单

### 输出格式检查

- [ ] 输出是否为纯 JSON（无额外文字）
- [ ] 键是否为英文
- [ ] 值是否为中文
- [ ] 无关键是否已省略
- [ ] 过长描述是否已摘要（>80字自动摘要）
- [ ] 无任何中断性询问

### 人像分析准确性检查

- [ ] 图片比例是否已识别？
- [ ] 姿态是否与图片一致？（站/坐/躺）
- [ ] 服装颜色是否准确？
- [ ] 服装类型是否正确？（特别注意区分裤子和裙子）
- [ ] 鞋子描述是否具体？（不能只写"运动鞋"）
- [ ] 背景元素是否全部列出？
- [ ] 背景描述是否避免了模糊词？
- [ ] 是否执行了强制验证流程？

## 高级特性

### 动态结构调整

根据图片类型自动省略不相关的键：

- **人像照片**：保留人物、服装、姿态相关键
- **静物**：省略人物特征，保留环境、技术参数
- **风景**：省略人物、服装，保留环境、技术参数
- **UI截图**：使用专用 UI 结构，包含界面元素分析

### 不确定信息处理

无法确定时做合理推断并标注置信度：

```json
"expression": "微笑 (推测)",
"background_elements": ["建筑结构", "可能为室内场景 (推测)"]
```

### 质量适应策略

| 图片质量 | 处理方式 |
|---------|---------|
| 高质量 | 详细描述，保留所有子键 |
| 中等质量 | 适度描述，简化形容词 |
| 低质量/模糊 | 基础描述，添加 "(模糊)" 标注 |

## 常见问题

### Q: 为什么我的鞋子描述不够详细？

A: 系统会强制检查鞋子细节。如果描述太简单（如"运动鞋"），会重新扫描图片，补充：类型、颜色、款式、品牌特征、鞋底颜色、鞋带样式等具体信息。

### Q: 背景描述为什么不能写"背景虚化"？

A: "背景虚化"是摄影效果，不是内容描述。必须描述虚化前的实际内容，如：米色墙面、木纹地板、绿色盆栽等。这样才能实现1:1还原。

### Q: UI截图中的文字会被记录吗？

A: 是的，UI截图类图片会完整记录所有可见文字，包括：标题、正文、按钮文字、标签、时间、数字等。

### Q: 支持哪些图片格式？

A: 支持常见图片格式：.jpg, .jpeg, .png, .webp, .gif等。

## 许可证

MIT License

---

**作者**：Claude Code Skills

**版本**：1.0.0

**更新日期**：2025-01-15
